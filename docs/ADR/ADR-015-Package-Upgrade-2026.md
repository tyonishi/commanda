# ADR-015: パッケージ最新バージョンへのアップグレード (2026-01)

## ステータス
承認済み

## 文脈
Commandaプロジェクトは、.NET 8.0 WPFアプリケーションで様々なNuGetパッケージを使用しています。セキュリティ、パフォーマンス、保守性を確保するため、全パッケージを最新バージョンにアップグレードする必要がありました。これには、Microsoft.Extensions.* パッケージを10.0.2（.NET 9プレビュー版だが.NET 8と互換）、Entity Framework Coreを8.0.23などへのアップグレードが含まれます。

## 決定
2026年1月時点の最新安定/プレビュー版に全NuGetパッケージをアップグレードする：
- Microsoft.Extensions.*: 10.0.2
- System.Text.Json: 10.0.2
- Microsoft.EntityFrameworkCore.Sqlite: 8.0.23
- MaterialDesignThemes: 5.3.0
- Prism.Core: 9.0.537
- ModelContextProtocol: 0.5.0-preview.1

## 影響

### 肯定的影響
- 最新パッチによるセキュリティ強化
- パフォーマンス改善とバグ修正
- 長期保守性の向上
- 将来の.NETバージョンとの互換性

### 否定的影響
- 潜在的な破壊的変更（発生なし）
- プレビューバージョンに軽微な問題が発生する可能性

### 中立的影響
- パッケージサイズのわずかな増加
- 安定版リリースの監視が必要

## 実装
- Visual Studio NuGet Package Managerを使用して全パッケージをアップグレード
- ソリューションのビルドとユニットテストの実行
- `dotnet list package --vulnerable` でセキュリティ脆弱性の確認
- コードの互換性問題のレビュー
- CIビルドエラー修正: テストプロジェクトに `<SelfContained>false</SelfContained>` を追加

## 監視
- ビルド成功: ✅
- テスト成功: ✅
- セキュリティスキャン: ✅ 脆弱性なし
- パフォーマンス: 基準維持

## 成功指標
- システムがエラーなくビルドされる
- 全テストがパスする
- セキュリティ脆弱性なし
- アプリケーション機能が維持される