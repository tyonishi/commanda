# ADR-005: アーキテクチャ比較とトレードオフ

## ステータス
承認済み

## 背景
初期のElectronベース設計と新しい.NETベースアーキテクチャを比較し、最適な進路を決定します。

## 決定
保守性の改良を取り入れつつ、Windows最適化とコンポーネント分離のために.NETアーキテクチャを採用します。

**アーキテクチャ比較:**

| 側面 | 初期設計 | 新設計 | 決定 |
|------|----------|--------|------|
| プラットフォーム | クロスプラットフォーム (Electron) | Windowsネイティブ (.NET) | 対象Windowsユーザー向けに.NETを採用 |
| LLM | Claude (MCPネイティブ) | GPTベース | MCP統合の良さでClaudeを検討 |
| 複雑性 | シンプル (2コンポーネント) | 複雑 (4コンポーネント) | 安全性/制御のために複雑性を容認 |
| UIフレームワーク | Webベース | ネイティブ (WPF/MAUI) | エンタープライズユーザー向けにネイティブを優先 |
| 操作エンジン | MCPに統合 | 分離されたC#エンジン | セキュリティのために分離を維持 |

## 影響

### 肯定的
- Windowsプラットフォームでのより良いパフォーマンス
- より明確なセキュリティ境界
- より容易なエンタープライズ統合
- ネイティブUIがより良いユーザー体験を提供

### 否定的
- プラットフォームロックインが柔軟性を低下
- より高い開発複雑性
- より多くのプロセス間通信オーバーヘッド

### 中立的
- .NET専門知識で総開発時間が類似
- 保守コストは高いがWindowsフォーカスで相殺

## 実装
**推奨改良:**
1. **MCP標準化**: カスタムASP.NET実装の代わりに公式MCP SDKを使用
2. **LLM選択**: MCP互換性でClaude vs GPTを評価
3. **通信**: 効率的なプロセス間通信を実装 (gRPC/HTTP2)
4. **監視**: 中央集権ログとメトリクス収集を追加

## 監視
- アーキテクチャ間のパフォーマンスベンチマーク
- 開発生産性指標
- Windows環境でのユーザー採用率